<navscroller></navscroller>
<div class="container-fluid">
  <div class="row">
    <main class="col offset pt-3">
      <div class="page-header">
        <h1 class="text-success">{{today | date: "MMMM" }}</h1>
      </div>
      <table *ngIf="monthCalendar" class="table table-bordered">
        <thead>
        <tr>
          <th>Day</th>
          <th>Day Of Week</th>
          <th>Weekend</th>
          <th>Start</th>
          <th>End</th>
          <th>Worked Out</th>
        </tr>
        <tbody>
        <tr *ngFor="let day of monthCalendar">
          <td>{{day.id}}</td>
          <td>{{day.day | date: 'EEE'}}
          </td>
          <td>
            <button [hidden]="day.wdId" class="btn btn-info disabled">Weekend</button>
            <button *ngIf="day"
                    (click)="addWeekend(day.wdId)"
                    [hidden]="!day.wdId || isDisabledEnd(day.id)"
                    class="btn btn-warning">Make weekend
            </button>
          </td>
          <td (click)="day.isClick = !isDisabledStart(day.id)">
            <input required
                   #start
                   type="time"
                   min="08:00"
                   max="19:00"
                   value="{{day.startWork | tm}}"
                   [disabled]="isDisabledStart(day.id)"
                   [hidden]="!day.startWork && !day.isClick"
                   (input)="changeStartClicked(start.value, day.id, start.checkValidity())"
                   (click)="day.errorsMs = null;"
            >
            <small class="alert alert-danger" *ngIf="day.errorsMs && day.isClick">{{day.errorsMs[0]}}</small>
            <small class="alert alert-info" *ngIf="((!day.isValidStart) && day.isClick)">(8:00 - 19:00)</small>
          </td>
          <td (click)="day.isClick = !isDisabledEnd(day.id)">
            <div>
              <input required #end type="time" value="{{day.endWork | tm}}"
                     [disabled]="isDisabledEnd(day.id)"
                     [hidden]="!day.endWork && !day.isClick"
                     (input)="changeEndClicked(end.value, day.id, end.checkValidity())"
                     min="09:00"
                     max="20:00"
                     (click)="day.errorsMs;">
            </div>
            <button [disabled]="!day.isValidEnd || !day.isValidStart"
                    [hidden]="!day.isClick"
                    class="btn btn-success"
                    (click)="save(day.id)">Save
            </button>
            <button *ngIf="day"
                    [hidden]="!day.isClick"
                    class="btn btn-primary"
                    (click)="reset()">Reset
            </button>
            <small class="alert alert-info" *ngIf="((!day.isValidEnd) && day.isClick)">(9:00 - 20:00)</small>
            <div class="row">
              <small class="alert alert-danger" *ngIf="check(day.errorsMs) && day.isClick">{{day.errorsMs[1]}}</small>
            </div>
          </td>
          <td>{{day.workedOut ? 'Yes' : 'No'}}</td>
        </tr>
        </tbody>
      </table>
    </main>
  </div>
</div>
