<navscroller></navscroller>
<div class="container" id="main">
  <div class="row">
    <div class="col-12">
      <div class="row justify-content-center mt-2 mb-2">
        <h5>Edit Order #{{order.id}}</h5>
      </div>


      <form [formGroup]="orderForm" id="orderForm">
        <form [formGroup]="senderAddressForm" class="mb-3">
          <label>
            Sender Address
          </label>
          <br>
          <div class="row">
            <div class="col-7">
              <label for="street">Street</label>
              <input formControlName="street" type="text" class="form-control" id="street" value="{{order.senderAddress.street}}"
                     [(ngModel)]="order.senderAddress.street" required>
              <small class="alert alert-danger" *ngIf="!validateFieldSenderAddress('street')">Enter the street name</small>
            </div>
            <div class="col">
              <label for="house">House</label>
              <input formControlName="house" type="text" class="form-control" id="house"  value="{{order.senderAddress.house}}"
                     [(ngModel)]="order.senderAddress.house" required >
              <small class="alert alert-danger" *ngIf="!validateFieldSenderAddress('house')">Enter the house number</small>
            </div>
            <div class="col">
              <label for="floor">Floor</label>
              <input formControlName="floor" type="number" class="form-control" id="floor"  value="{{order.senderAddress.floor}}"
                     [(ngModel)]="order.senderAddress.floor">
              <small class="alert alert-danger" *ngIf="!validateFieldSenderAddress('floor')">Enter the floor number</small>
            </div>
            <div class="col">
              <label for="flat">Flat</label>
              <input formControlName="flat" type="number" class="form-control" id="flat"  value="{{order.senderAddress.flat}}"
                     [(ngModel)]="order.senderAddress.flat">
              <small class="alert alert-danger" *ngIf="!validateFieldSenderAddress('flat')">Enter the flat number</small>
            </div>
          </div>
        </form>
        <form [formGroup]="receiverAddressForm" class="mb-3">
          <label>
            Receiver Address
          </label>
          <br>
          <div class="row">
            <div class="col-7">
              <label for="receiverStreet">Street</label>
              <input formControlName="street"  id= "receiverStreet" type="text" class="form-control"  value="{{order.receiverAddress.street}}"
                     [(ngModel)]="order.receiverAddress.street" required>
              <small class="alert alert-danger" *ngIf="!validateFieldReceiverAddress('street')">Enter the street name</small>
            </div>
            <div class="col">
              <label for="receiverHouse">House</label>
              <input formControlName="house" type="text" class="form-control" id="receiverHouse"  value="{{order.receiverAddress.house}}"
                     [(ngModel)]="order.receiverAddress.house" required>
              <small class="alert alert-danger" *ngIf="!validateFieldReceiverAddress('house')">Enter the house number</small>
            </div>
            <div class="col">
              <label for="receiverFloor">Floor</label>
              <input formControlName="floor" type="number" class="form-control" id="receiverFloor" value="{{order.receiverAddress.floor}}"
                     [(ngModel)]="order.receiverAddress.floor">
              <small class="alert alert-danger" *ngIf="!validateFieldReceiverAddress('floor')">Enter the floor number</small>
            </div>
            <div class="col">
              <label for="receiverFlat">Flat</label>
              <input formControlName="flat" type="number" class="form-control" id="receiverFlat"  value="{{order.receiverAddress.flat}}"
                     [(ngModel)]="order.receiverAddress.flat">
              <small class="alert alert-danger" *ngIf="!validateFieldReceiverAddress('flat')">Enter the flat number</small>
            </div>
          </div>
        </form>

        <label for="clientAvailability">Enter the time when receiver can receive the order:</label>
        <div class="row" id="clientAvailability">
          <div class="col ">
            <label for="receiverAvailabilityDate">Date : </label>

            <input class="dateTimeInput"  formControlName="receiverAvailabilityDate"  id="receiverAvailabilityDate" type="date" value="{{order.receiverAvailabilityTimeFrom | date :'yyyy-MM-dd'}}" ngModel="{{receiverAvailabilityDate}}" >
          </div>
          <div class="col">
            <label for="receiverAvailabilityFrom">Time From : </label>
            <input class="dateTimeInput" formControlName="receiverAvailabilityFrom" id="receiverAvailabilityFrom" type="time" value="{{order.receiverAvailabilityTimeFrom | date :'HH:mm'}}"  ngModel="{{receiverAvailabilityFrom}}">
          </div>
          <div class="col"><label for="receiverAvailabilityTo">Time To : </label>
            <input class="dateTimeInput"   formControlName="receiverAvailabilityTo" id="receiverAvailabilityTo" type="time" value="{{order.receiverAvailabilityTimeTo | date :'HH:mm'}}"  ngModel="{{receiverAvailabilityTo}}">
          </div>
        </div>


        <div>
          <label>
            Office
          </label>
          <select formControlName="office" [(ngModel)]="order.office"  class="form-control">
            <option *ngFor="let office of offices" [ngValue]="office" [selected]="office.id == office1.id">
              {{office.name}}
            </option>
          </select>
        </div>

        <div class="mb-3">
          <label for="description">
            Order description
          </label>
          <textarea formControlName="description" class="form-control" name="description" rows="3" id="description" placeholder="Any Additional information"
                    value="{{order.description}}" [(ngModel)]="order.description"></textarea>
        </div>
      </form>
    </div>
  </div>
</div>
<footer class="footer">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-4">
        <button class="btn btn-primary btn-sm btn-block btn-success" [disabled]="orderForm.invalid"
                (click)="confirmOrder()"  form="orderForm"   type="submit">
          Confirm
        </button>
      </div>
      <div class="col-4">
        <button class="btn btn-primary btn-sm btn-block btn-danger" (click)="cancelOrder()" type="button">Cancel
        </button>
      </div>
      <div class="col-4">
        <button class="btn btn-primary  btn-sm btn-block btn-danger" routerLink="/orderHistory/{{currentUserId}}" type="button">Back
        </button>
      </div>
    </div>
  </div>
</footer>
